<theme-selector></theme-selector>
<script is:inline>
  if (!customElements.get('theme-selector')) {
    customElements.define(
      'theme-selector',
      class extends HTMLElement {
        connectedCallback() {
          // this.innerHTML = `
          //   <select>
          //     <option value="auto">Auto</option>
          //     <option value="light">Light</option>
          //     <option value="dark">Dark</option>
          //   </select>
          // `;
          this.innerHTML = `
            <button id="theme-toggle" class="-mr-2 flex h-8 w-8 cursor-pointer items-center justify-center" aria-label="Change color scheme">
              <svg class="h-4 w-4 fill-current" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                <circle cx="8" cy="8" r="8"></circle>
              </svg>
            </button>
          `;
          // this.querySelector('select').onchange = (event) => theme.setTheme(event.target.value);
          this.querySelector('button').onclick = () => theme.setTheme(theme.getTheme() === 'dark' ? 'light' : 'dark');
          this.setAttribute('aria-label', 'Select Theme');
          this.updateSelectedTheme();

          document.addEventListener('theme-changed', (event) => {
            this.updateSelectedTheme(event.detail.theme);
          });
        }

        updateSelectedTheme(newTheme = theme.getTheme()) {
          this.querySelector('select').value = newTheme;
        }
      }
    );
  }
</script>
